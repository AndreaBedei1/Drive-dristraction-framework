carla:
  host: "127.0.0.1"
  port: 2000
  timeout: 10.0
  seed: 42

  # Prefer short names (Town10HD/Town04). The runner will pick the first available.
  map_preference: ["Town10HD", "Town04"]

  sync: true
  fixed_delta_seconds: 0.035
  ticker_stats_interval_seconds: 5.0  # 0 disables ticker performance logs

  traffic_manager:
    port: 8000
    hybrid_physics_radius: 80.0
    global_speed_percentage_difference: -20.0  # negative => faster, positive => slower
    min_distance_to_leading_vehicle: 2.5
    ignore_lights_percentage: 10
    ignore_signs_percentage: 5
    random_left_lanechange_percentage: 20
    random_right_lanechange_percentage: 20

weather:
  preset: "ClearNoon"  # try also: CloudyNoon, WetNoon, HardRainNoon, ClearSunset

traffic_lights:
  green_time: 5.0
  yellow_time: 1.0
  red_time: 1.0

arousal_sensor:
  enabled: true
  device_name: "HW9"
  baseline_seconds: 60
  smoothing_window: 10
  reconnect_seconds: 5.0
  no_sample_timeout_seconds: 12.0
  placeholder_value: -1.0
  debug: false
  debug_interval_seconds: 10.0

inference:
  enable_model: true
  enable_emotion: true
  enable_preview: false
  use_process: true
  preview_hz: 15.0

traffic:
  vehicles: 10
  safe_radius_from_route_start: 35.0

pedestrians:
  walkers: 200
  running_percentage: 20
  crossing_percentage: 100
  max_speed_walking: 2.5
  max_speed_running: 4.0

route:
  # "auto" = deterministic pick using seed
  start_spawn_point: "auto"
  # "auto_far" = farthest spawn point from start
  end_spawn_point: "auto_far"

  sampling_resolution: 2.0
  waypoint_reached_threshold: 4.0

  draw: true
  draw_step: 10
  draw_life_time: 999999.0

  auto_reset_on_finish: true
  reset_cooldown_seconds: 3.0
  # Optional explicit test route (spawn point indices). If empty, auto picks city/highway.
  test_spawn_points: []
  test_city_radius_ratio: 0.35
  test_highway_radius_ratio: 0.7
  test_city_density_radius_m: 60.0
  test_city_density_ratio: 0.6
  test_highway_distance_ratio: 0.5

manual_control:
  # path: "src/manual_control.py"
  path: "src/manual_control_steeringwheel.py"
  max_speed_kmh: 50.0  # 0 = disabled
  extra_args:
    - "--filter=vehicle.tesla.model3"
    - "--res=3840x1080"
    # - "--res=1920x1080"

    # optional:
    # - "-a"

experiment:
  user_id: "participant_13"
  run_id: 1
  weather_label: "day"
  output_dir: "data"
  max_duration_seconds: 600  # stop scenario after 10 minutes; <= 0 disables timeout
  # baseline | distraction
  dataset_profile: "distraction"
  baseline_dataset_suffix: "_baseline"
  distraction_dataset_suffix: "_distraction"
  mode: "train"  # train | test
  test_map_preference: ["Town04"]
  test_vehicles: 100
  test_walkers: 120
  test_dataset_suffix: "_test"

errors:
  harsh_brake_threshold_mps2: 3.5
  harsh_brake_min_speed_kmh: 10.0
  harsh_brake_min_brake: 0.7
  harsh_brake_cooldown_seconds: 1.5
  red_light_check_hz: 15.0   # keep high enough to avoid missed crossings
  red_light_min_speed_kmh: 1.0
  red_light_distance_m: 12.0
  red_light_pass_distance_m: 5.0
  red_light_pass_buffer_m: 0.0
  red_light_track_distance_m: 12.0
  red_light_min_interval_seconds: 2.0
  red_light_cooldown_seconds: 5.0
  stop_sign_check_hz: 15.0   # keep high enough to track stop-zone entry/exit
  stop_sign_min_speed_kmh: 10.0
  stop_sign_zone_half_width_m: 1.0
  stop_sign_zone_length_m: 3.0
  stop_sign_dedupe_distance_m: 1.5
  stop_sign_dedupe_time_s: 1.0
  debug_stop_visualization: false
  debug_stop_life_time: 6.0
  solid_line_cooldown_seconds: 2.0
  collision_cooldown_seconds: 2.0
  collision_static_min_speed_kmh: 2.5   # ignore static-object contacts below this speed
  collision_static_min_impulse: 120.0   # ignore static-object contacts below this impulse
  collision_static_relog_seconds: 12.0  # avoid repeated logs on the same static actor

distractions:
  enabled: true
  fullscreen: false
  fill_monitor: true
  steal_focus: false
  excluded_letters:
    - W
    - S
    - A
    - D
    - Q
    - P
    - M
    - L
    - Z
    - X
    - I
    - N
    - G
    - C
    - T
    - V
    - B
    - R
    - H
  min_interval_seconds: 25.0
  max_interval_seconds: 35.0
  min_gap_between_windows_seconds: 5.0
  flash_duration_seconds: 5.0
  flash_start_interval_seconds: 0.5
  flash_min_interval_seconds: 0.05
  beep_frequency_hz: 880
  beep_duration_ms: 200
  window_titles: ["Distraction 1", "Distraction 2"]
  simulation_window_title: "CARLA Manual Control"

